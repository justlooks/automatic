# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
url --url=http://192.168.1.24/6.5/x86_64/
lang en_US.UTF-8
keyboard us
text
skipx
%include /tmp/network.ks

#network --onboot yes --device eth0 --bootproto static --ip 192.168.1.26 --netmask 255.255.255.0 --gateway 192.168.1.88 --noipv6 --nameserver 8.8.8.8 
rootpw  --iscrypted $6$VPrpSHsrAIIq3H6X$DX3l8p7zjFylHfFwwyqfmv4YP6np4KonqFtEEFY5RFFfu4mqYtyTQ4k136nAwOV/4SEnfAhZo5guHonMTfcFj/
firewall --disabled
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone --utc Asia/Shanghai
#bootloader --location=mbr --driveorder=sda --append="crashkernel=auto console=ttyS0,115200"
bootloader --location=mbr --driveorder=sda 
zerombr
clearpart --all --initlabel
#volgroup VolGroup --pesize=4096 pv.008002
#logvol / --fstype=ext4 --name=lv_root --vgname=VolGroup --grow --size=1024 --maxsize=51200
#logvol swap --name=lv_swap --vgname=VolGroup --grow --size=992 --maxsize=992
part / --bytes-per-inode=4096 --fstype=ext4 --grow --size=1
part /boot --fstype=ext4 --size=200
part swap --size=1024

repo --name="local65"  --baseurl=http://192.168.1.24/6.5/x86_64/ --cost=100

%packages --nobase
@core
%end
%pre
#!/bin/sh
BASE="network --onboot yes --bootproto static --noipv6"
for x in `cat /proc/cmdline`;do
        case $x in
                HOSTNAME*)
                        eval $x;;
                HOSTIP*)
                        eval $x;;
		HOSTGW*)
                        eval $x;;
		HOSTDNS*)
                        eval $x;;
		NETMASK*)
                        eval $x;;
        esac;
done
BASE="$BASE --hostname ${HOSTNAME-"needbeset"} --ip ${HOSTIP-"192.168.1.254"} --nameserver ${HOSTDNS-"8.8.4.4"} --gateway ${HOSTGW-"192.168.1.88"} --netmask ${NETMASK-"255.255.255.0"}"
echo "$BASE" > /tmp/network.ks
%end

%post
sed -i 's/^timeout=.*$/timeout=1/' /boot/grub/grub.conf
%end

reboot
